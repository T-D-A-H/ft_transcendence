<!DOCTYPE html>
<html>
	<head>
		<title>Mini Pong</title>
		<link href="/game/styles/tailwind.css" rel="stylesheet" />
	</head>

	<body class="bg-gray-900 text-white h-screen">

		<!-- Loadinf screen -->
		<div id="load_animation_modal" class="fixed inset-0 flex items-center justify-center bg-gray-900 z-50">
			<div class="text-center">
				<!-- Spinner animado -->
				<div class="inline-block h-12 w-12 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite] mb-4"></div>
				<div class="text-white text-lg">Loading...</div>
			</div>
		</div>

		<!-- Top bar -->
		<div class="fixed top-0 left-0 w-full h-12 bg-gray-800 flex items-center justify-end px-4 z-40">
			<div class="flex gap-x-2">


				<!-- Login button -->
				<button id="test_game"
					class="px-4 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm">
					Test Game
				</button>


				<!-- Login button -->
				<button id="open_login"
					class="px-4 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm hidden">
					Log in
				</button>
			
				<!-- Register button -->
				<button id="open_register"
					class="px-4 py-1 bg-green-600 hover:bg-green-700 rounded text-sm hidden">
					Register
				</button>

				<!-- Play Against User button (hidden) -->
				<button id="play_against_user"
					class="px-4 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm hidden">
					Play Against User
				</button>

				<!-- Create Tournament Button (hidden) -->
				<button id="create_tournament"
					class="px-4 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm hidden">
					Create Tournament
				</button>

				<!-- Play locally Button (hidden) -->
				<button id="play_locally"
					class="px-4 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm hidden">
					Play Locally
				</button>

				<!-- Search Tournament Button (hidden) -->
				<button id="search_tournament"
					class="px-4 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm hidden">
					Search Tournaments
				</button>

				<!-- Start Match button -->
				<button id="start_match"
					class="px-4 py-1 bg-green-600 hover:bg-green-700 rounded text-sm hidden">
					Start Match
				</button>

				<!-- Logout button -->
				<button id="logout_button"
					class="px-4 py-1 bg-red-600 hover:bg-red-700 rounded text-sm hidden">
					Logout
				</button>
			</div>
		</div>

		<!-- Main content -->
		<div class="flex justify-center items-center h-full relative">

			<!-- Canvas -->
			<canvas id="game_screen" width="600" height="400"
				class="bg-black border-4 border-gray-700 rounded-lg">
			</canvas>


			<button id="waiting_players"
				class="absolute z-50 px-4 py-2 bg-yellow-600 rounded text-lg hidden">
				Waiting for Players...
			</button>

		</div>

		<!-- Play Request Modal -->
		<div id="play_request_modal"
			class="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 hidden">
			<div class="bg-gray-800 p-6 rounded-lg w-80">
			
				<h2 class="text-xl mb-4">Play Against User</h2>
			
				<input id="play_request_username" type="text"
					class="w-full p-2 mb-4 bg-gray-700 rounded"
					placeholder="Enter username" />
			
				<div class="flex justify-between">
					<button id="close_play_request"
						class="px-3 py-1 bg-gray-600 hover:bg-gray-700 rounded text-sm">
						Cancel
					</button>
				
					<button id="send_play_request"
						class="px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm">
						Send Play Request
					</button>
				</div>
			
			</div>
		</div>

		<!-- Incoming Play Request Modal -->
		<div id="incoming_play_request_modal"
			class="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 hidden">
			<div class="bg-gray-800 p-6 rounded-lg w-80">
			
				<h2 class="text-xl mb-4">Incoming Match Request</h2>
			
				<p id="incoming_play_request_text" class="mb-4 text-gray-300">
					Player wants to play against you.
				</p>
			
				<div class="flex justify-between">
					<button id="incoming_play_request_close"
						class="px-3 py-1 bg-gray-600 hover:bg-gray-700 rounded text-sm">
						Cancel
					</button>
				
					<button id="incoming_play_request_accept"
						class="px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm">
						Accept
					</button>
				</div>
			
			</div>
		</div>


		<!-- Active players modal -->
		<div id="active_tournaments_modal"
			class="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 hidden">
			<div class="bg-gray-800 p-6 rounded-lg w-80">
				<h3 class="mb-2 text-sm">Open Tournaments</h3>
				<ul id="tournament_list_ul" class="text-xs flex flex-col gap-2"></ul>
			</div>
		</div>

		<!-- Login modal -->
		<div id="login_modal"
			class="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 hidden">
			<div class="bg-gray-800 p-6 rounded-lg w-80">

				<h2 class="text-xl mb-4">Sign In</h2>

				<input id="user_input" type="text"
					class="w-full p-2 mb-3 bg-gray-700 rounded"
					placeholder="Username" />

				<input id="pass_input" type="password"
					class="w-full p-2 mb-4 bg-gray-700 rounded"
					placeholder="Password" />

				<div class="flex justify-between">
					<button id="close_login"
						class="px-3 py-1 bg-gray-600 hover:bg-gray-700 rounded text-sm">
						Cancel
					</button>

					<button id="login_submit_button"
						class="px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm">
						Login
					</button>
				</div>

			</div>
		</div>
		
		<!-- Register modal -->
		<div id="register_modal"
			class="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 hidden">
			<div class="bg-gray-800 p-6 rounded-lg w-80">
			
				<h2 class="text-xl mb-4">Register</h2>
			
				<input id="reg_username" type="text"
					class="w-full p-2 mb-3 bg-gray-700 rounded"
					placeholder="Username" />
			
				<input id="reg_displayname" type="text"
					class="w-full p-2 mb-3 bg-gray-700 rounded"
					placeholder="Display Name" />
			
				<input id="reg_email" type="email"
					class="w-full p-2 mb-3 bg-gray-700 rounded"
					placeholder="Email" />
			
				<input id="reg_password" type="password"
					class="w-full p-2 mb-4 bg-gray-700 rounded"
					placeholder="Password" />
			
				<div class="flex justify-between">
					<button id="close_register"
						class="px-3 py-1 bg-gray-600 hover:bg-gray-700 rounded text-sm">
						Cancel
					</button>
				
					<button id="register_submit_button"
						class="px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-sm">
						Register
					</button>
				</div>
			
			</div>
		</div>

		<!-- 2FA modals -->
		<div id="twofa_option_modal"
			class="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 hidden">
			<div class="bg-gray-800 p-6 rounded-lg w-80">
				<h2 class="text-xl mb-4">Choose 2FA Method</h2>
				<div class="flex flex-col gap-3">
					<button id="twofa_email_button" 
						class="px-3 py-2 bg-blue-600 hover:bg-blue-700 rounded text-sm">
						2FA via Email
					</button>
					<button id="twofa_auth_button"
						class="px-3 py-2 bg-purple-600 hover:bg-purple-700 rounded text-sm">
						2FA via Authenticator
					</button>
					<button id="twofa_sms_button"
						class="px-3 py-2 bg-green-600 hover:bg-green-700 rounded text-sm">
						2FA via SMS
					</button>
					<button id="twofa_skip_button"
						class="px-3 py-2 bg-gray-600 hover:bg-gray-700 rounded text-sm">
						Skip
					</button>
				</div>
			</div>
		</div>

		<div id="twofa_modal"
			class="fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 hidden">
			<div class="bg-gray-800 p-6 rounded-lg w-80">
				<h2 class="text-xl mb-4">Two-Factor Authentication</h2>
				<input id="twofa_input" type="text"
					class="w-full p-2 mb-4 bg-gray-700 rounded"
					placeholder="Enter 2FA code" />
				<div class="flex justify-end">
					<button id="twofa_submit_button"
							class="px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm">
						Verify
					</button>
				</div>
			</div>
		</div>
		
		<!-- Snail gif -->
		<img src="/game/assets/snail2.gif" class="fixed bottom-2 right-2 w-12 z-50" />

		<script type="module" src="/game/public/main.js"></script>

	</body>
</html>
